buttons = list(
list(
label = "Cases",
method = "update",
args = list(list(visible = rep(c(T, F), 6)),
list(title = "DMV Covid-19 Cases by County"))),
list(
label = "Cases per 100K",
method = "update",
args = list(list(visible = rep(c(F, T), 6)),
list(title = "DMV Covid-19 Cases Rate by County")))
)
)))
plot_ly() %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Cases,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Case_Rate_100K,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12)))
plot_ly() %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Cases,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Case_Rate_100K,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
plot_ly() %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Cases,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Case_Rate_100K,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
list(visible = rep(c(T, F), 6))
list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12)))
plot_ly() %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Cases,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Case_Rate_100K,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(
active = 0,
type= 'buttons',
buttons = list(
list(
label = "Cases",
method = "update",
args = list(list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
list(title = "DMV Covid-19 Cases by County"))),
list(
label = "Cases per 100K",
method = "update",
args = list(list("visible", append(rep(list(F), 12), rep(list(T), 12))),
list(title = "DMV Covid-19 Cases Rate by County")))
)
)))
plot_ly() %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Cases,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
add_trace(data = dmvCasesByCountyLinePlotly,
linetype = ~factor(State),
color = ~factor(County),
x = ~Date,
y = ~Case_Rate_100K,
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
)) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
p <- p %>% layout(
updatemenus = list(
list(
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 5), rep(list(FALSE), 5))),
label = "Show Y"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 5), rep(list(TRUE), 5))),
label = "Show Z")))
))
p
test <- plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date, y = ~Cases)
test <- plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date)
plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date) %>%
add_trace(y = ~Cases,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date) %>%
add_trace(y = ~Cases,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list(list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
list(title = "DMV Covid-19 Cases by County")),
label = "Cases"),
list(method = "restyle",
args = list(list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
list(title = "DMV Covid-19 Case Rate by County")),
label = "Cases per 100K")))
))
plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date) %>%
add_trace(y = ~Cases,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(yaxis = list(type = "log"),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
plot_ly(data = dmvCasesByCountyLinePlotly, x = ~Date) %>%
add_trace(y = ~Cases,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
linetype = ~factor(State),
color = ~factor(County),
colors = "Set3",
mode = "lines+markers",
type = "scatter",
symbol = ~State,
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(yaxis = list(type = "log"),
title = "DMV Covid-19 Cases & Case Rate by County",
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
dmvCasesByCountyLinePlotly
dmvCasesByCountyBarPerCapPlotly <- DMV_Counties_Covid_Cases %>%
left_join(stateCountyPops, by = "FIPS") %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS)
dmvCasesByCountyBarPerCapPlotly
DMV_Counties_Covid_Cases %>%
left_join(stateCountyPops, by = "FIPS") %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
mutate(Case_Rate_100K = (Cases / TOTAL_POP_100K))
dmvCasesByCountyBarPerCapPlotly <- DMV_Counties_Covid_Cases %>%
left_join(stateCountyPops, by = "FIPS") %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
mutate(Case_Rate_100K = (Cases / TOTAL_POP_100K))
plot_ly(dmvCasesByCountyBarPerCapPlotly, x = ~factor(State), type = "bar") %>%
add_trace(y = ~Cases,
color = ~factor(County),
colors = "Set3",
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
color = ~factor(County),
colors = "Set3",
hovertemplate = paste(
"State: ", dmvCasesByCountyLinePlotly$State,
"<br>County: ", dmvCasesByCountyLinePlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(title = paste("DMV Covid-19 Cases & Case Rate by County on", Sys.Date() - 1, sep = " "),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
plot_ly(dmvCasesByCountyBarPerCapPlotly, x = ~factor(State), type = "bar") %>%
add_trace(y = ~Cases,
color = ~factor(County),
colors = "Set3",
hovertemplate = paste(
"State: ", dmvCasesByCountyBarPerCapPlotly$State,
"<br>County: ", dmvCasesByCountyBarPerCapPlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = T) %>%
add_trace(y = ~Case_Rate_100K,
color = ~factor(County),
colors = "Set3",
hovertemplate = paste(
"State: ", dmvCasesByCountyBarPerCapPlotly$State,
"<br>County: ", dmvCasesByCountyBarPerCapPlotly$County,
"<br>Cases: ", "%{y}",
"<br>Date: ", "%{x}",
"<extra></extra>"
),
visible = F) %>%
layout(title = paste("DMV Covid-19 Cases & Case Rate by County on", Sys.Date() - 1, sep = " "),
updatemenus = list(
list(active = 0,
buttons = list(
list(method = "restyle",
args = list("visible", append(rep(list(TRUE), 12), rep(list(FALSE), 12))),
label = "Cases"),
list(method = "restyle",
args = list("visible", append(rep(list(FALSE), 12), rep(list(TRUE), 12))),
label = "Cases per 100K")))
))
