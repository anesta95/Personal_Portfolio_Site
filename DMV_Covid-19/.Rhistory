labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 8, position = position_dodge2(width = 0.9, reverse = F)) +
scale_x_discrete(expand = expand_scale(mult = c(0, 0))) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 8, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 0)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 8, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 1)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 8, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, .1)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, .3)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 1.2)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 1.5)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 2)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 4)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 8)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(-2, 10)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 10)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 15)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
#scale_y_continuous(expand = c(0, 15)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
scale_y_continuous(expand = c(0, 13)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
dmvCasesByCountyBar <- DMV_Counties_Covid_Cases %>%
filter(Date == max(Date)) %>%
filter(FIPS %in% DMV_Closer_FIPS) %>%
ggplot(aes(x = State, y = Cases, fill = reorder(County, -Cases))) +
geom_col(position = "dodge") +
geom_text(aes(label = Cases), vjust = -0.2, size = 7, position = position_dodge2(width = 0.9, reverse = F)) +
covid19Theme() +
scale_fill_brewer(palette = "Paired") +
labs(title = "DMV Covid-19 cases by county", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("") +
guides(fill=guide_legend(title="County"))
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/dmvCasesByCountyBar.png", plot = dmvCasesByCountyBar, width = 300, height = 250, units = 'mm')
Sys.sleep(5)
dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#00257C", "#ebab00ff")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
dcAndVATestsLine <- dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/dcAndVATestsLine.png", plot = dcAndVATestsLine, width = 275, height = 250, units = 'mm')
Sys.sleep(5)
dailySummary %>%
drop_na(Tests) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Tests)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Tests), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 tests", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
DMVTestsLine <- dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsLine.png", plot = dcAndVATestsLine, width = 275, height = 250, units = 'mm')
dailySummary %>%
drop_na(Tests) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Tests)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Tests), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
DMVTestsBar <- dailySummary %>%
drop_na(Tests) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Tests)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Tests), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsBar.png", plot = dcAndVATestsBar, width = 275, height = 250, units = 'mm')
DMVTestsLine <- dailySummary %>%
drop_na(Tests) %>%
ggplot(aes(x = Date, y = Tests)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(shape = State, color = State), size = 6) +
scale_color_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsLine.png", plot = DMVTestsLine, width = 275, height = 250, units = 'mm')
Sys.sleep(5)
#
DMVTestsBar <- dailySummary %>%
drop_na(Tests) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Tests)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Tests), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#ebab00ff", "#00257C")) +
covid19Theme() +
labs(title = "DMV Covid-19 tests", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsBar.png", plot = DMVTestsBar, width = 275, height = 250, units = 'mm')
DMVTestsLine
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsLine.png", plot = DMVTestsLine, width = 275, height = 250, units = 'mm')
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/DMVTestsBar.png", plot = DMVTestsBar, width = 275, height = 250, units = 'mm')
dailySummary %>%
drop_na(State) %>%
ggplot(aes(x = Date, y = Deaths)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(color = State, shape = State), na.rm = T, size = 6) +
scale_color_manual(values = c("#E91436", "#EBAB00", "#00257C")) +
scale_y_continuous(breaks = seq(min(dailySummary$Deaths, na.rm = T), max(dailySummary$Deaths, na.rm = T), by = 1)) +
covid19Theme() +
labs(title = "DC & VA Covid-19 deaths", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
dcmdvaDeathsLine <- dailySummary %>%
drop_na(State) %>%
ggplot(aes(x = Date, y = Deaths)) +
geom_line(aes(color = State), na.rm = T, size = 3) +
geom_point(aes(color = State, shape = State), na.rm = T, size = 6) +
scale_color_manual(values = c("#E91436", "#EBAB00", "#00257C")) +
scale_y_continuous(breaks = seq(min(dailySummary$Deaths, na.rm = T), max(dailySummary$Deaths, na.rm = T), by = 1)) +
covid19Theme() +
labs(title = "DC & VA Covid-19 deaths", subtitle = "Over time", caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/dcmdvaDeathsLine.png", plot = dcmdvaDeathsLine, width = 275, height = 250, units = 'mm')
dailySummary %>%
drop_na(State) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Deaths)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Deaths), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#EBAB00", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 deaths", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
dcmdvaDeathsBar <- dailySummary %>%
drop_na(State) %>%
filter(Date == max(Date)) %>%
ggplot(aes(x = State, y = Deaths)) +
geom_col(aes(fill = State), na.rm = T) +
geom_text(aes(label = Deaths), vjust = -0.2, size = 8) +
scale_fill_manual(values = c("#E91436", "#EBAB00", "#00257C")) +
covid19Theme() +
labs(title = "DC & VA Covid-19 deaths", subtitle = paste("On", Sys.Date(), sep = " "), caption = ggplotCaption) + xlab("") + ylab("")
ggsave(filename = "/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19/dcmdvaDeathsBar.png", plot = dcmdvaDeathsBar, width = 275, height = 300, units = 'mm')
counties <- st_read("tl_2019_us_county.shp")
DMV <- counties %>%
mutate(GEOID = as.character(GEOID)) %>%
filter(GEOID %in% DMV_FIPS)
DMV_Counties_Covid_Cases
DMV
DMV_Counties_Covid_Cases_Today <- DMV_Counties_Covid_Cases %>%
filter(Date == max(Date))
DMV %>%
left_join(DMV_Counties_Covid_Cases_Today, by = c("GEOID" = "FIPS"))
DMV_Cases <- DMV %>%
left_join(DMV_Counties_Covid_Cases_Today, by = c("GEOID" = "FIPS"))
DMV_Cases %>%
mutate(Cases = if_else(is.na(Cases), 0, Cases))
st_crs(DMV_Cases) <- "+proj=longlat +datum=WGS84"
as.integer(round(c(unname(quantile(DMV_Cases$Cases, na.rm = T)), Inf), 0))
hist(DMV_Cases$Cases)
DMV_Cases$Cases.freq
DMV_Cases$Cases
frequency(DMV_Cases$Cases)
sort(DMV_Cases$Cases)
as.integer(round(c(unname(quantile(DMV_Cases$Cases, na.rm = T)), Inf), 0))
round(c(as.integer(unname(quantile(DMV_Cases$Cases, na.rm = T))), Inf), 0)
round(c(as.integer(unname(quantile(DMV_Cases$Cases, na.rm = T))), "Max"), 0)
myBins <- round(c(as.integer(unname(quantile(DMV_Cases$Cases, na.rm = T))), Inf), 0)
dmvPalette <- colorBin(palette = "YlOrRd", domain = DMV_Cases$Cases, na.color = "transparent", bins = myBins)
legendText <- paste0(
"County: ", DMV_Cases$NAME, "<br/>",
"State: ", DMV_Cases$State, "<br/>",
"Cases: ", DMV_Cases$Cases, "<br/>"
) %>%
lapply(htmltools::HTML)
attribution <- htmltools::HTML("Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a><br/>Data from: <a href = 'https://dhhr.wv.gov/COVID-19/Pages/default.aspx'>WV DHHR</a>, <a href='https://coronavirus.dc.gov/page/coronavirus-data'>DC Mayor's Office</a>, <a href='https://coronavirus.maryland.gov/'>MD Dept of Health</a>, <a href='http://www.vdh.virginia.gov/coronavirus/'>VA Dept of Health</a>")
leaflet(DMV_Cases) %>%
addTiles(attribution = attribution) %>%
setView(lat = "38.8858", lng = "-77.1054", zoom = 8) %>%
addPolygons(stroke=T,
opacity = 1,
fillOpacity = 0.9,
smoothFactor = 0.5,
color = "black",
fillColor = ~dmvPalette(Cases),
weight = 0.3,
label = legendText,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "13px",
direction = "auto"
)) %>%
addLegend( pal=dmvPalette, values=~Cases, opacity=0.9, title = paste("DMV Covid-19 Cases on", Sys.Date()), position = "topright" )
leaflet(DMV_Cases) %>%
addTiles(attribution = attribution) %>%
setView(lat = "38.8858", lng = "-77.1054", zoom = 8) %>%
addPolygons(stroke=T,
opacity = 1,
fillOpacity = 0.9,
smoothFactor = 0.5,
color = "black",
fillColor = ~dmvPalette(Cases),
weight = 0.5,
label = legendText,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "13px",
direction = "auto"
)) %>%
addLegend( pal=dmvPalette, values=~Cases, opacity=0.9, title = paste("DMV Covid-19 Cases on", Sys.Date()), position = "topright" )
dmvChloropleth <- leaflet(DMV_Cases) %>%
addTiles(attribution = attribution) %>%
setView(lat = "38.8858", lng = "-77.1054", zoom = 8) %>%
addPolygons(stroke=T,
opacity = 1,
fillOpacity = 0.9,
smoothFactor = 0.5,
color = "black",
fillColor = ~dmvPalette(Cases),
weight = 0.5,
label = legendText,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "13px",
direction = "auto"
)) %>%
addLegend( pal=dmvPalette, values=~Cases, opacity=0.9, title = paste("DMV Covid-19 Cases on", Sys.Date()), position = "topright" )
mapshot(dmvChloropleth, url = "/home/adrian/Documents/Personal_Porfolio_Site/DMV_Covid-19/dmvChloropleth.html")
library(rvest)
library(htmltools)
library(htmlwidgets)
library(RColorBrewer)
library(xml2)
library(curl)
library(httr)
library(splashr)
library(stevedore)
library(rlist)
library(lubridate)
library(RSelenium)
library(wdman)
library(devtools)
library(pdftools)
library(sf)
library(raster)
library(sp)
library(rgdal)
library(leaflet)
library(mapview)
library(readxl)
library(tidyverse)
Full_States <- read_csv("FullStates.csv")
DMV_Counties <- c("District of Columbia",
"Calvert", "Charles", "Frederick", "Montgomery", "Prince Georges",
"Alexandria", "Arlington", "Clarke", "Culpeper", "Fairfax", "Farquier", "Fredericksburg", "Loudoun", "Manassas", "Prince William", "Rappahannock", "Spotsylvania", "Stafford", "Warren",
"Jefferson")
DMV_FIPS <- c("11001", "24009", "24017", "24021", "24031", "24033", "51510", "51013", "51043", "51047", "51059", "51061", "51630", "51107", "51683", "51153", "51157", "51177", "51179", "51187", "54037", "51600", "51610")
DMV_Closer_FIPS <- c("24031", "24033", "24021", "24009", "51510", "51013", "51059", "51600", "51107", "51153", "51047", "11001")
Full_States %>%
mutate(FIPS = as.character(FIPS)) %>%
filter(FIPS %in% DMV_FIPS)
DMV_Counties_Covid_Cases <- Full_States %>%
mutate(FIPS = as.character(FIPS)) %>%
filter(FIPS %in% DMV_FIPS)
counties <- st_read("tl_2019_us_county.shp")
DMV <- counties %>%
mutate(GEOID = as.character(GEOID)) %>%
filter(GEOID %in% DMV_FIPS)
# plot(st_geometry(DMV))
DMV_Counties_Covid_Cases_Today <- DMV_Counties_Covid_Cases %>%
filter(Date == max(Date))
DMV_Cases <- DMV %>%
left_join(DMV_Counties_Covid_Cases_Today, by = c("GEOID" = "FIPS"))
DMV_Cases %>%
mutate(Cases = if_else(is.na(Cases), 0, Cases))
st_crs(DMV_Cases) <- "+proj=longlat +datum=WGS84"
DMV_Cases <- DMV_Cases %>%
mutate(Cases = if_else(is.na(Cases), 0, Cases))
st_crs(DMV_Cases) <- "+proj=longlat +datum=WGS84"
myBins <- round(c(as.integer(unname(quantile(DMV_Cases$Cases, na.rm = T))), Inf), 0)
dmvPalette <- colorBin(palette = "YlOrRd", domain = DMV_Cases$Cases, na.color = "transparent", bins = myBins)
legendText <- paste0(
"County: ", DMV_Cases$NAME, "<br/>",
"State: ", DMV_Cases$State, "<br/>",
"Cases: ", DMV_Cases$Cases, "<br/>"
) %>%
lapply(htmltools::HTML)
attribution <- htmltools::HTML("Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a><br/>Data from: <a href = 'https://dhhr.wv.gov/COVID-19/Pages/default.aspx'>WV DHHR</a>, <a href='https://coronavirus.dc.gov/page/coronavirus-data'>DC Mayor's Office</a>, <a href='https://coronavirus.maryland.gov/'>MD Dept of Health</a>, <a href='http://www.vdh.virginia.gov/coronavirus/'>VA Dept of Health</a>")
leaflet(DMV_Cases) %>%
addTiles(attribution = attribution) %>%
setView(lat = "38.8858", lng = "-77.1054", zoom = 8) %>%
addPolygons(stroke=T,
opacity = 1,
fillOpacity = 0.9,
smoothFactor = 0.5,
color = "black",
fillColor = ~dmvPalette(Cases),
weight = 0.5,
label = legendText,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "13px",
direction = "auto"
)) %>%
addLegend( pal=dmvPalette, values=~Cases, opacity=0.9, title = paste("DMV Covid-19 Cases on", Sys.Date()), position = "topright" )
dmvChloropleth <- leaflet(DMV_Cases) %>%
addTiles(attribution = attribution) %>%
setView(lat = "38.8858", lng = "-77.1054", zoom = 8) %>%
addPolygons(stroke=T,
opacity = 1,
fillOpacity = 0.9,
smoothFactor = 0.5,
color = "black",
fillColor = ~dmvPalette(Cases),
weight = 0.5,
label = legendText,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "3px 8px"),
textsize = "13px",
direction = "auto"
)) %>%
addLegend( pal=dmvPalette, values=~Cases, opacity=0.9, title = paste("DMV Covid-19 Cases on", Sys.Date()), position = "topright" )
mapshot(dmvChloropleth, url = "/home/adrian/Documents/Personal_Porfolio_Site/DMV_Covid-19/dmvChloropleth.html")
setwd("/home/adrian/Documents/Personal_Portfolio_Site/DMV_Covid-19")
mapshot(dmvChloropleth, url = "dmvChloropleth.html")
